
{
  "entities": {
    "Patient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient with their medical history, care plans, and emergency contacts.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Patient entity." },
        "firstName": { "type": "string", "description": "The first name of the patient." },
        "lastName": { "type": "string", "description": "The last name of the patient." },
        "dateOfBirth": { "type": "string", "description": "The date of birth of the patient.", "format": "date-time" },
        "medicalHistory": { "type": "string", "description": "A summary of the patient's medical history." },
        "carePlan": { "type": "string", "description": "Details of the patient's care plan." },
        "emergencyContactName": { "type": "string", "description": "Name of the emergency contact." },
        "emergencyContactPhone": { "type": "string", "description": "Phone number of the emergency contact." }
      },
      "required": ["id", "firstName", "lastName", "dateOfBirth"]
    },
    "DailyRecord": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DailyRecord",
      "type": "object",
      "description": "Represents a daily record of activities, medication administration, and observations for a patient.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the DailyRecord entity." },
        "patientId": { "type": "string", "description": "Reference to Patient." },
        "date": { "type": "string", "description": "The date of the record.", "format": "date-time" },
        "activities": { "type": "string", "description": "Description of daily activities." },
        "medicationAdministration": { "type": "string", "description": "Details of medication administered." },
        "observations": { "type": "string", "description": "Relevant observations for the patient." },
        "status": { "type": "string", "enum": ["pending", "completed"], "description": "The status of the record." }
      },
      "required": ["id", "patientId", "date", "status"]
    },
    "Staff": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Staff",
      "type": "object",
      "description": "Represents a staff member with their profile, schedule, and role information.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Staff entity. This is the same as the user's auth UID." },
        "name": { "type": "string", "description": "The full name of the staff member." },
        "email": { "type": "string", "description": "The email of the staff member.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the staff member." },
        "role": { "type": "string", "description": "The role of the staff member (e.g., nurse, doctor)." },
        "schedule": { "type": "string", "description": "The schedule of the staff member." },
        "certifications": { "type": "array", "items": { "type": "string" }, "description": "List of certifications held by the staff member." },
        "status": { "type": "string", "enum": ["pending", "active"], "description": "The status of the staff account."}
      },
      "required": ["id", "name", "role", "email", "status"]
    },
    "SleepLog": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "SleepLog",
        "type": "object",
        "description": "Represents a daily sleep log for a patient, tracking hourly status.",
        "properties": {
            "id": { "type": "string", "description": "Unique identifier for the SleepLog entity." },
            "patientId": { "type": "string", "description": "Reference to the Patient." },
            "log_date": { "type": "string", "description": "The date of the sleep log.", "format": "date" },
            "hours": { "type": "array", "items": { "type": "string", "enum": ["awake", "asleep"] }, "description": "An array representing the sleep status for each of the 24 hours in a day." },
            "notes": { "type": "string", "description": "Additional notes about the patient's sleep." }
        },
        "required": ["id", "patientId", "log_date", "hours"]
    },
    "Notification": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Notification",
      "type": "object",
      "description": "Represents an in-app notification for a user.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the notification." },
        "title": { "type": "string", "description": "The title of the notification." },
        "description": { "type": "string", "description": "A brief description of the notification content." },
        "date": { "type": "string", "description": "The timestamp when the notification was created.", "format": "date-time" },
        "read": { "type": "boolean", "description": "Whether the user has read the notification." },
        "href": { "type": "string", "description": "An optional URL to navigate to when the notification is clicked." }
      },
      "required": ["id", "title", "date", "read"]
    },
    "BehaviorEvent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BehaviorEvent",
      "type": "object",
      "description": "Represents a logged behavior event for a patient.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the behavior event." },
        "patientId": { "type": "string", "description": "Reference to the Patient." },
        "eventDateTime": { "type": "string", "description": "The date and time of the event.", "format": "date-time" },
        "behavior": { "type": "array", "items": { "type": "string" }, "description": "The type(s) of behavior observed." },
        "intensity": { "type": "string", "description": "The intensity of the behavior (e.g., low, medium, high)." },
        "activity": { "type": "string", "description": "The activity the patient was engaged in." },
        "setting": { "type": "string", "description": "The setting where the behavior occurred." },
        "antecedent": { "type": "string", "description": "What happened immediately before the behavior." },
        "response": { "type": "string", "description": "The intervention or response from staff." },
        "comment": { "type": "string", "description": "A summary comment about the event." }
      },
      "required": ["id", "patientId", "eventDateTime", "behavior", "intensity", "activity", "setting", "response"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
     "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "type": "object",
            "properties": {
              "email": {"type": "string"},
              "displayName": {"type": "string"},
              "role": { "type": "string", "enum": ["admin", "staff"] }
            }
          },
          "description": "Stores basic user profile information and role."
        }
      },
      {
        "path": "/users/{userId}/notifications/{notificationId}",
        "definition": {
          "entityName": "Notification",
          "schema": { "$ref": "#/backend/entities/Notification" },
          "description": "Stores notifications for a specific user."
        }
      },
      {
        "path": "/patients/{patientId}",
        "definition": {
          "entityName": "Patient",
          "schema": { "$ref": "#/backend/entities/Patient" },
          "description": "Stores patient profiles."
        }
      },
      {
        "path": "/patients/{patientId}/dailyRecords/{dailyRecordId}",
        "definition": {
          "entityName": "DailyRecord",
          "schema": { "$ref": "#/backend/entities/DailyRecord" },
          "description": "Stores daily records for a specific patient."
        }
      },
      {
          "path": "/patients/{patientId}/sleepLogs/{sleepLogId}",
          "definition": {
              "entityName": "SleepLog",
              "schema": { "$ref": "#/backend/entities/SleepLog" },
              "description": "Stores sleep logs for a specific patient."
          }
      },
      {
        "path": "/patients/{patientId}/behaviorEvents/{behaviorEventId}",
        "definition": {
            "entityName": "BehaviorEvent",
            "schema": { "$ref": "#/backend/entities/BehaviorEvent" },
            "description": "Stores behavior events for a specific patient."
        }
      },
      {
        "path": "/staff/{staffId}",
        "definition": {
          "entityName": "Staff",
          "schema": { "$ref": "#/backend/entities/Staff" },
          "description": "Stores staff profiles. The staffId is the same as the user's auth UID."
        }
      }
    ]
  }
}
